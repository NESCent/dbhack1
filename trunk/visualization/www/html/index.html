<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  
  <!-- YAHOO! Move to local once we have decided what to keep -->
  <link rel="stylesheet" type="text/css" href="/hackathon/css/fonts-min.css" />
  <link rel="stylesheet" type="text/css" href="/hackathon/css/autocomplete.css" />
  <link rel="stylesheet" type="text/css" href="/hackathon/css/resize.css" />
  <link rel="stylesheet" type="text/css" href="/hackathon/css/container.css" />
  <link rel="stylesheet" type="text/css" href="/hackathon/css/button.css" />

  <link rel="stylesheet" type="text/css" href="/hackathon/css/widget.css">

  <script type="text/javascript" src="/hackathon/js/yahoo-dom-event.js"></script>
  <script type="text/javascript" src="/hackathon/js/element-beta-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/dragdrop-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/resize-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/connection-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/animation-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/datasource-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/autocomplete-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/container-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/button-min.js"></script>
  <script type="text/javascript" src="/hackathon/js/cookie-min.js"></script> 


  <script type="text/javascript" src="/hackathon/phylowidget/scripts/phylowidget.js"></script>
  <script type="text/javascript" src="/hackathon/js/balloon.config.js"></script>
  <script type="text/javascript" src="/hackathon/js/balloon.js"></script>
  <script type="text/javascript" src="/hackathon/js/box.js"></script>
  <script type="text/javascript" src="/hackathon/js/widget.js"></script>

  <script type="text/javascript" >
    PhyloWidget.codebase = "/phylowidget/lib";
    var widget  = new PWidget;
    
    // This updates the tree data without re-loading phylowidget
    function loadTree(tree) {
      if (tree) {
        widget.treeText.value = tree;
        PhyloWidget.updateTree(tree);
      }
    }      

    // AJAX stuff for the tree database search
    var sUrl, callback;
    window.onload = function() {
      var div = document.getElementById('searchResultsContainer');
      var handleSuccess = function(o){
        div.innerHTML = o.responseText;
      };

      var handleFailure = function(o){
        div.innerHTML = 'AJAX FAILURE!';
      };

      callback = {
        success:handleSuccess,
        failure:handleFailure,
        argument:['foo','bar']
      };

      sUrl = "/cgi-bin/hackathon/tree_search.pl";
    }

  </script>
</head>


<body class="yui-skin-sam">

<script type="text/javascript">
  var balloon = new Balloon;
  BalloonConfig(balloon,'GBubble');
  var box     = new Box;
  BalloonConfig(box,'GBox');
</script>

<div id="header">
<center>LOGO/BRANDING</center>
</div>

<div id="panels">

<div id="search">
 <div id="searchTitle" class="hd">Search</div>
 <div class="bd" id="searchContainer" style="overflow:auto">
  <div id="searchAutoComplete" class="searchbar">
   <input id="searchInput" />
   <div id="searchAutocompleteContainer"></div>
   <div style="float:right">
    <input type="submit" value="Search" onclick="widget.doSearch()">
   </div>
  </div>
  <div id="searchResultsContainer"></div>
 </div>
 <div class="ft"></div>
</div>


<div id="tree">
  <div id="treeTitle" class="hd">Tree Data</div>
  <div id="treeContainer" class="bd">
    <textarea onblur="PhyloWidget.updateTree(this.value)"
              style="font-size:10px;width:100%;height:100%" 
              id="treeText">
    </textarea>
  </div>
 <div class="ft"></div>
</div>

<div id="clip">
  <div id="clipTitle" class="hd">Clipboard</div>
  <div id="clipContainer" class="bd">
    <textarea onblur="PhyloWidget.updateClip(this.value)"
              style="font-size:10px;width:100%;height:100%"
              id="clipText">
    </textarea>
  </div>
 <div class="ft"></div>
</div>

<div id="decoration">
  <div id="decorationTitle" class="hd">Node Decorations</div>
  <div id="decorationContainer" class="bd"></div>
  <div class="ft"></div>
</div>

<div id="node">
  <div id="nodeTitle" class="hd">Node Information</div>
  <div id="nodeContainer" class="bd">
    <div id="nodeText"></div>
  </div>
 <div class="ft"></div>
</div>


<div id="widget">
 <div id="widgetTitle" class="hd">Phylowidget</div>
 <div id="widgetContainer" class="bd" style="text-align:center;font-size:10pt">
  <div style="padding-top:30%">
     <p>
       <img src="/images/phylowidget/pw-icon.png" />
       PhyloWidget is an external application.<br>  
       <a href="javascript:loadTree('(a,((b,c),(e,f)))')">Click here to launch.</a>
     </p>
  </div>
 </div>
 <div class="ft">
   <div class="footerText">Click here to update &nbsp;&nbsp;<span onclick="widget.saveTreeForm(event)">Click here to save the tree</span></div>
 </div>
</div>

</div> <!-- end 'panels' div -->

<!-- The conatiner for show/hide buttons -->
<div id="showhide">
 <div class="label">Show</div>
</div>

<!-- Move this stuff to widget.js and fire with a window.onload event handler -->
<script type="text/javascript">
  widget.getLayout();

  YAHOO.example.BasicRemote = function() {
    // Use an XHRDataSource
    var oDS = new YAHOO.util.XHRDataSource("/cgi-bin/hackathon/species_search.pl");
    // Set the responseType
    oDS.responseType = YAHOO.util.XHRDataSource.TYPE_TEXT;
    // Define the schema of the delimited results
    oDS.responseSchema = {
        recordDelim: "\n",
        fieldDelim: "\t"
    };
    // Enable caching
    oDS.maxCacheEntries = 5;

    // Instantiate the AutoComplete
    var oAC = new YAHOO.widget.AutoComplete("searchInput", "searchAutocompleteContainer", oDS);

    return {
        oDS: oDS,
        oAC: oAC
    };
}();

</script>

</body>
</html>


